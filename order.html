<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SK Crackers - Premium Fireworks Online</title>
    <link rel="icon" href="./assets/logo-transparent.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Arial", sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        /* State Selection Modal */
        .state-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .state-modal.hidden {
            display: none;
        }
        .state-modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .state-modal h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: 24px;
        }
        .state-modal p {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }
        .states-list {
            display: grid;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .state-option {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 16px;
        }
        .state-option:hover {
            background: #fff3e0;
            border-color: #ff9900;
        }
        .state-info {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
            color: #333;
        }
        /* State Info Bar */
        .state-info-bar {
            background: #e3f2fd;
            border-bottom: 1px solid #bbdefb;
            padding: 10px 0;
            text-align: center;
            color: #1565c0;
            font-weight: bold;
            display: none;
        }
        .state-info-bar.show {
            display: block;
        }
        /* Header Styles */
        .header {
            background: #232f3e;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .header-top {
            padding: 15px 0;
        }
        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
        }
        .logo img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
        .search-container {
            flex: 1;
            display: flex;
            max-width: 600px;
            margin: 0 20px;
        }
        .search-category {
            padding: 12px;
            border: none;
            background: #f3f3f3;
            border-radius: 4px 0 0 4px;
            min-width: 200px;
            font-size: 14px;
        }
        .search-input {
            flex: 1;
            padding: 12px;
            border: none;
            font-size: 16px;
        }
        .search-btn {
            padding: 12px 20px;
            background: #ff9900;
            border: none;
            border-radius: 0 4px 4px 0;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        .search-btn:hover {
            background: #e68900;
        }
        .header-actions {
            display: flex;
            gap: 20px;
        }
        .account,
        .cart {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background 0.3s;
            position: relative;
        }
        .account:hover,
        .cart:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        /* Products Table Styles */
        .products {
            padding: 40px 0;
            background-color: #ffffff;
        }
        .products h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
            color: #333;
        }
        .category-section {
            margin-bottom: 40px;
        }
        .category-title {
            font-size: 1.5rem;
            color: #fff;
            background: #e91e63;
            padding: 15px 20px;
            margin: 0;
            text-transform: uppercase;
            font-weight: bold;
        }
        .products-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .products-table th {
            background: #e91e63;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #d81b60;
        }
        .products-table td {
            padding: 15px 10px;
            text-align: center;
            border: 1px solid #ddd;
            vertical-align: middle;
        }
        .products-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .products-table tbody tr:hover {
            background-color: #f0f0f0;
        }
        .preview-btn {
            background: #e91e63;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .preview-btn:hover {
            background: #d81b60;
        }
        .product-image-small {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        .price-original {
            color: #666;
            text-decoration: line-through;
            font-size: 14px;
        }
        .price-current {
            color: #4caf50;
            font-weight: bold;
            font-size: 16px;
        }
        .price-mrp {
            color: #333;
            font-weight: bold;
        }
        .discount-price {
            color: #f44336;
            font-weight: bold;
        }
        .qty-input {
            width: 50px; /* Adjusted width */
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            -moz-appearance: textfield; /* Hide arrows in Firefox */
        }
        /* Hide arrows in Chrome, Safari, Edge */
        .qty-input::-webkit-outer-spin-button,
        .qty-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .quantity-controls-table { /* New style for table quantity controls */
            display: flex;
            align-items: center;
            gap: 5px;
            justify-content: center;
        }
        .qty-btn-table { /* New style for table quantity buttons */
            background: #f0f0f0;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }
        .qty-btn-table:hover {
            background: #e0e0e0;
        }
        .add-to-cart-btn {
            background: #ff9900;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .add-to-cart-btn:hover {
            background: #e68900;
        }
        .sold-out-text {
            color: #ff4757;
            font-weight: bold;
            font-size: 14px;
        }
        /* Product Detail Modal */
        .product-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10001;
        }
        .product-modal.show {
            display: flex;
        }
        .product-modal-content {
            background: white;
            border-radius: 10px;
            padding: 0;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: #ff9800;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 1;
        }
        .modal-body {
            display: flex;
            min-height: 400px;
        }
        .modal-image-section {
            flex: 1;
            padding: 20px;
            background: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-main-image {
            width: 100%;
            max-width: 300px;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
        }
        .modal-info-section {
            flex: 1;
            padding: 20px;
        }
        .modal-product-name {
            font-size: 24px;
            font-weight: bold;
            color: #e91e63;
            margin-bottom: 15px;
        }
        .modal-price-section {
            margin-bottom: 20px;
        }
        .modal-price-original {
            color: #f44336;
            text-decoration: line-through;
            font-size: 18px;
            margin-right: 10px;
        }
        .modal-price-current {
            color: #4caf50;
            font-size: 24px;
            font-weight: bold;
        }
        .modal-info-table {
            width: 100%;
            margin-bottom: 20px;
        }
        .modal-info-table td {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .modal-info-table td:first-child {
            font-weight: bold;
            color: #666;
            width: 40%;
        }
        .availability-in-stock {
            color: #4caf50;
            font-weight: bold;
        }
        .brand-assured {
            color: #4caf50;
        }
        .brand-assured::before {
            content: "✓ ";
            margin-right: 5px;
        }
        .account {
            display: flex;
            align-items: center;
            justify-content: center;
            color: inherit;
            text-decoration: none;
        }
        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s;
            z-index: 1001;
            display: flex;
            flex-direction: column;
        }
        .cart-sidebar.open {
            right: 0;
        }
        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .close-cart {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        .cart-items {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }
        .cart-item-info {
            flex: 1;
        }
        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .cart-item-price {
            color: #ff4757;
            font-weight: bold;
        }
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        .qty-btn {
            background: #f0f0f0;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
        }
        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
        }
        .cart-total {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
        .checkout-btn {
            width: 100%;
            background: #28a745;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .checkout-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .minimum-order-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
            text-align: center;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .no-products {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2rem;
        }
        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, #000000 0%, #282b33 100%);
            color: #fff;
            padding: 50px 0 0;
            position: relative;
            overflow: hidden;
        }
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 2;
        }
        .footer-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 50px;
            margin-bottom: 50px;
        }
        .footer-section h3 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 25px;
            color: #ffd700;
            position: relative;
            padding-bottom: 10px;
        }
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(45deg, #ff6b35, #ffd700);
            border-radius: 2px;
        }
        .footer-description {
            font-size: 1rem;
            line-height: 1.6;
            color: #cbd5e1;
            margin-bottom: 25px;
        }
        .social-links {
            display: flex;
            gap: 15px;
        }
        .social-link {
            width: 45px;
            height: 45px;
            background: linear-gradient(45deg, #ff6b35, #ffd700);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-size: 1.2rem;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }
        .social-link:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.5);
        }
        .footer-links {
            list-style: none;
        }
        .footer-links li {
            margin-bottom: 12px;
        }
        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .footer-links a:hover {
            color: #ffd700;
            transform: translateX(5px);
        }
        .footer-links a i {
            font-size: 0.9rem;
            color: #ff6b35;
        }
        .contact-info {
            list-style: none;
        }
        .contact-info li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 20px;
            font-size: 1rem;
            color: #cbd5e1;
        }
        .contact-info i {
            color: #ffd700;
            font-size: 1.2rem;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .map-container {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-top: 20px;
        }
        .map-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #334155, #475569);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 0;
            text-align: center;
        }
        .footer-disclaimer {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #94a3b8;
            margin-bottom: 20px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        .footer-copyright {
            font-size: 1rem;
            color: #cbd5e1;
        }
        .footer-copyright strong {
            color: #ffd700;
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            .search-container {
                width: 100%;
                flex-direction: column;
                align-items: stretch;
            }
            .search-category,
            .search-input,
            .search-btn {
                width: 100%;
                margin-bottom: 10px;
            }
            .search-btn {
                margin-bottom: 0;
            }
            .header-actions {
                width: 100%;
                display: flex;
                justify-content: space-between;
            }
            .account,
            .cart {
                width: 48%;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .cart-count {
                margin-left: 5px;
            }
            .footer-content {
                grid-template-columns: 1fr 1fr;
                gap: 40px;
                text-align: left;
            }
            .footer-container {
                padding: 0 1rem;
            }
            .products-table {
                font-size: 12px;
            }
            .products-table th,
            .products-table td {
                padding: 8px 5px;
            }
            .modal-body {
                flex-direction: column;
            }
        }
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            .search-container {
                margin: 0;
                max-width: 100%;
            }
            .hero-content h1 {
                font-size: 2rem;
            }
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }
            .cart-count{
                right:58px;
            }
            .header-top {
                padding: 10px 0;
            }
            .search-container {
                flex-direction: column;
                gap: 8px;
            }
            .search-category,
            .search-input,
            .search-btn {
                border-radius: 4px;
                width: 100%;
            }
            .search-category {
                min-width: auto;
            }
            .search-input {
                font-size: 14px;
                padding: 10px;
            }
            .search-btn {
                padding: 10px 15px;
            }
            .products {
                padding: 15px 0;
            }
            #productsTitle {
                font-size: 1.3rem;
                margin-bottom: 10px;
                text-align: center;
            }
            .footer-content {
                grid-template-columns: 1fr;
                gap: 40px;
                text-align: center;
            }
            .footer-logo {
                justify-content: center;
            }
            .products-table {
                font-size: 10px;
            }
            .products-table th,
            .products-table td {
                padding: 5px 2px;
            }
            .qty-input {
                width: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- State Selection Modal -->
    <div class="state-modal" id="stateModal">
        <div class="state-modal-content">
            <h2>Select Your State</h2>
            <p>Please select your state to set the minimum order amount</p>
            <div class="states-list" id="statesList">
                <!-- States will be populated by JavaScript -->
            </div>
            <div class="state-info">
                <p><strong>Tamil Nadu:</strong> Minimum order ₹3,000</p>
                <p><strong>Other States:</strong> Minimum order ₹5,000</p>
            </div>
        </div>
    </div>
    <!-- State Info Bar -->
    <div class="state-info-bar" id="stateInfoBar">
        <span id="stateInfoText"></span>
    </div>
    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <span>SK Cracker's</span>
                    </div>
                    <div class="search-container">
                        <select class="search-category" id="categoryFilter">
                            <option value="all">All Categories</option>
                            <option value="ONE SOUND CRACKERS">ONE SOUND CRACKERS</option>
                            <option value="TWO SOUND CRACKERS">TWO SOUND CRACKERS</option>
                            <option value="BIJILI">BIJILI</option>
                            <option value="BOMBS (NAACHIAR/SRI VIJAI/RAMCO)">BOMBS (NAACHIAR/SRI VIJAI/RAMCO)</option>
                            <option value="paper bomb [Adijaal]">paper bomb [Adijaal]</option>
                            <option value="FLOWER POTS">FLOWER POTS</option>
                            <option value="Flower pot bombs [shineshine]">Flower pot bombs [shineshine]</option>
                            <option value="Ground chakkars">Ground chakkars</option>
                            <option value="Special Wheels">Special Wheels</option>
                            <option value="Wire chakkars [standard]">Wire chakkars [standard]</option>
                            <option value="Twinkling Stars">Twinkling Stars</option>
                            <option value="Pencil Torch">Pencil Torch</option>
                            <option value="ROCKETS">ROCKETS</option>
                            <option value="DIGITAL WALA">DIGITAL WALA</option>
                            <option value="CHILDREN NOVELTIES">CHILDREN NOVELTIES</option>
                            <option value="COLOUR FOUNTAINS">COLOUR FOUNTAINS</option>
                            <option value="COLOUR FOUNTAINS (SUNSHINE BRAND)">COLOUR FOUNTAINS (SUNSHINE BRAND)</option>
                            <option value="DOUBLE STEP FOUNTAINS">DOUBLE STEP FOUNTAINS</option>
                            <option value="TRIPLE STEP FOUNTAINS">TRIPLE STEP FOUNTAINS</option>
                            <option value="MEGA FOUNTAINS">MEGA FOUNTAINS</option>
                            <option value="FOUNTAIN WITH SKY SHOTS">FOUNTAIN WITH SKY SHOTS</option>
                            <option value="PEACOCK">PEACOCK</option>
                            <option value="SMOKE">SMOKE</option>
                            <option value="NEW ARRIVALS">NEW ARRIVALS</option>
                            <option value="MUD FLOWER POTS">MUD FLOWER POTS</option>
                            <option value="MINI AERIAL CHOTTA FANCY">MINI AERIAL CHOTTA FANCY</option>
                            <option value="MEGA AERIAL FANCY">MEGA AERIAL FANCY</option>
                            <option value="MULTICOLOUR SHOTS">MULTICOLOUR SHOTS</option>
                            <option value="FAN CAKES (NEW ARRIVALS)">FAN CAKES (NEW ARRIVALS)</option>
                            <option value="WHISTLING SHOTS">WHISTLING SHOTS</option>
                            <option value="SPARKLERS">SPARKLERS</option>
                            <option value="SPECIAL SPARKLERS">SPECIAL SPARKLERS</option>
                            <option value="CHILDREN'S COLOUR MATCH BOX (NET RATE)">CHILDREN'S COLOUR MATCH BOX (NET RATE)</option>
                            <option value="GIFT BOXES (NET RATE)">GIFT BOXES (NET RATE)</option>
                        </select>
                        <input type="text" class="search-input" id="searchInput" placeholder="Search for crackers, bombs, fountains...">
                        <button class="search-btn" onclick="performSearch()">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="header-actions">
                        <a href="./index.html" class="account">
                            <i class="fas fa-user"></i>
                                <span>Home</span>
                        </a>
                    </div>
                    <div class="cart" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Cart</span>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Product Detail Modal -->
    <div class="product-modal" id="productModal">
        <div class="product-modal-content">
            <button class="modal-close" onclick="closeProductModal()">×</button>
            <div class="modal-body">
                <div class="modal-image-section">
                    <img id="modalMainImage" class="modal-main-image" src="/placeholder.svg" alt="">
                </div>
                <div class="modal-info-section">
                    <h2 class="modal-product-name" id="modalProductName"></h2>
                    <div class="modal-price-section">
                        <span class="modal-price-original" id="modalPriceOriginal"></span>
                        <span class="modal-price-current" id="modalPriceCurrent"></span>
                    </div>
                    <table class="modal-info-table">
                        <tr>
                            <td>Brand</td>
                            <td class="brand-assured">SK Crackers Assured</td>
                        </tr>
                        <tr>
                            <td>Age Limit</td>
                            <td>15+</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Products -->
    <section class="products">
        <div class="container">
            <h2 id="productsTitle">All Products</h2>
            <div id="productContainer">
                <!-- Products will be loaded here by JavaScript -->
            </div>
        </div>
    </section>
    <!-- Shopping Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button class="close-cart" onclick="toggleCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <p class="empty-cart">Your cart is empty</p>
        </div>
        <div class="cart-footer">
            <div id="minimumOrderMessage" class="minimum-order-message" style="display: none;"></div>
            <div class="cart-total">
                <strong>Total: ₹<span id="cartTotal">0.00</span></strong>
            </div>
            <button class="checkout-btn" id="checkoutBtn" onclick="proceedToCheckout()">Proceed to Checkout</button>
        </div>
    </div>
    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="toggleCart()"></div>
    <!-- Footer -->
    <footer class="footer" id="footer">
        <div class="footer-container">
            <div class="footer-content">
                <!-- About Us Section -->
                <div class="footer-section">
                    <h3>About Us</h3>
                    <p class="footer-description">
                        SK Crackers is one of the leading crackers dealer in Sivakasi. Since 2015 we have the good relationship with our valuable customers. Here you can get all kinds of crackers with affordable prices.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                <!-- Useful Links Section -->
                <div class="footer-section">
                    <h3>Useful Links</h3>
                    <ul class="footer-links">
                        <li><a href="#about"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="#safety"><i class="fas fa-chevron-right"></i> Safety Tips</a></li>
                        <li><a href="#terms"><i class="fas fa-chevron-right"></i> Terms & Conditions</a></li>
                        <li><a href="#contact"><i class="fas fa-chevron-right"></i> Contact Us</a></li>
                        <li><a href="#enquiry"><i class="fas fa-chevron-right"></i> Quick Enquiry</a></li>
                        <li><a href="#order"><i class="fas fa-chevron-right"></i> Order Track</a></li>
                    </ul>
                </div>
                <!-- Contact Us Section -->
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul class="contact-info">
                        <li>
                            <i class="fas fa-clock"></i>
                            <div>
                                <strong>All Days:</strong><br>
                                9:00 A.M - 11:00 P.M
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <div>
                                +91 845229961<br>
                                +91 8765432109
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <div>skcrackerssivakasi@gmail.com</div>
                        </li>
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                S.NO.123/45 AND 2/567-L, 2/567-K,<br>
                                SIVAKASI NAGAR, SIVAKASI MAIN ROAD,<br>
                                SIVAKASI, SATTUR, VIRUDHUNAGAR,<br>
                                TAMILNADU, 626203.
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- Reach Us Section -->
                <div class="footer-section">
                    <h3>Reach Us</h3>
                    <div class="map-container">
                        <div class="map-placeholder">
                            <i class="fas fa-map-marked-alt"></i>
                            <span style="margin-left: 10px;">SK Crackers Location</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-disclaimer">
                    As per 2018 supreme court order, online sale of firecrackers are not permitted! We value our customers and at the same time, respect jurisdiction. We request you to add your products to the cart and submit the required crackers through the enquiry button. We will contact you within 24 hrs and confirm the order through WhatsApp or phone call. Please add and submit your enquiries and enjoy your Diwali with SK Crackers. Our License No. -----. SK Crackers as a company following 100% legal & statutory compliances and all our shops, go-downs are maintained as per the explosive acts. We send the parcels through registered and legal transport service providers as like every other major companies in Sivakasi is doing so.
                </div>
                <div class="footer-copyright">
                    © 2024 <strong>SK Crackers</strong>. All Rights Reserved. | Designed with ❤️ for Celebrations
                </div>
            </div>
        </div>
    </footer>
    <script>
        // Global variables
        let selectedState = '';
        let minimumOrderAmount = 3000;
        let cart = [];
        let currentFilter = "all";
        let currentSearch = "";
        let productQuantities = {};
        let products = []; // This will be loaded from localStorage or default
        // Indian states list
        const states = [
            "Tamil Nadu", "Andhra Pradesh", "Karnataka", "Kerala", "Telangana"
        ];
        // Default product data (used if no data in localStorage)
        const defaultProducts = [
            // ONE SOUND CRACKERS
            { id: 1, name: '2 3/4" Kuruvi', image: "./img/kuruvi1.jpg", originalPrice: 30, currentPrice: 24, category: "bombs", subcategory: "ONE SOUND CRACKERS", isSoldOut: false },
            { id: 2, name: '3 1/2" Redbull / Chotta bheem', image: "./img/chotta_beema.jpg", originalPrice: 60, currentPrice: 48, category: "bombs", subcategory: "ONE SOUND CRACKERS", isSoldOut: false },
            { id: 3, name: '5" Vikram/Tiger/Jallikattu', image: "./img/jallikattu.jpg", originalPrice: 200, currentPrice: 160, category: "bombs", subcategory: "ONE SOUND CRACKERS", isSoldOut: false },
            // TWO SOUND CRACKERS
            { id: 4, name: "2 Sound", image: "./img/2sound.jpg", originalPrice: 145, currentPrice: 116, category: "bombs", subcategory: "TWO SOUND CRACKERS", isSoldOut: false },
            // BIJILI
            { id: 5, name: "Red Bijili (100 Pcs)", image: "./img/redbijili.webp", originalPrice: 135, currentPrice: 108, category: "bombs", subcategory: "BIJILI", isSoldOut: false },
            // BOMBS (NAACHIAR/SRI VIJAI/RAMCO)
            { id: 6, name: "Bullet Bomb", image: "./img/bulletbomb.jpeg", originalPrice: 145, currentPrice: 116, category: "bombs", subcategory: "BOMBS (NAACHIAR/SRI VIJAI/RAMCO)", isSoldOut: false },
            { id: 7, name: "Hydro Bomb", image: "./img/hyderbomb.webp", originalPrice: 325, currentPrice: 260, category: "bombs", subcategory: "BOMBS (NAACHIAR/SRI VIJAI/RAMCO)", isSoldOut: false },
            { id: 8, name: "King of King Bomb", image: "./img/kingofking.webp", originalPrice: 395, currentPrice: 316, category: "bombs", subcategory: "BOMBS (NAACHIAR/SRI VIJAI/RAMCO)", isSoldOut: false },
            { id: 9, name: "Mega Flash", image: "./img/megaflash.png", originalPrice: 625, currentPrice: 500, category: "bombs", subcategory: "BOMBS (NAACHIAR/SRI VIJAI/RAMCO)", isSoldOut: false },
            { id: 10, name: "555 Bomb", image: "./img/555bomb.jpg", originalPrice: 550, currentPrice: 440, category: "bombs", subcategory: "BOMBS (NAACHIAR/SRI VIJAI/RAMCO)", isSoldOut: false },
            // FLOWER POTS
            { id: 11, name: "Flower Pots Small", image: "./img/flowerpotsmall.jpg", originalPrice: 275, currentPrice: 220, category: "fountains", subcategory: "FLOWER POTS", isSoldOut: false },
            { id: 12, name: "Flower Pots Big", image: "./img/flowerpotbig.jpeg", originalPrice: 350, currentPrice: 280, category: "fountains", subcategory: "FLOWER POTS", isSoldOut: false },
            { id: 13, name: "Flower Pots Asoka", image: "./img/flowerpotashok.webp", originalPrice: 725, currentPrice: 580, category: "fountains", subcategory: "FLOWER POTS", isSoldOut: false },
            { id: 14, name: "Colour Koti", image: "./img/colourkoti.jpg", originalPrice: 1050, currentPrice: 840, category: "fountains", subcategory: "FLOWER POTS", isSoldOut: false },
            // Flower pot bombs [shineshine]
            { id: 15, name: "Ganga Jamuna", image: "./img/gangajamuna.webp", originalPrice: 575, currentPrice: 460, category: "fountains", subcategory: "Flower pot bombs [shineshine]", isSoldOut: false },
            // Ground chakkars
            { id: 16, name: "Ground Chakkar Big (10 Pcs)", image: "./img/groundchakarabig.webp", originalPrice: 200, currentPrice: 160, category: "fountains", subcategory: "Ground chakkars", isSoldOut: false },
            { id: 17, name: "Ground Chakkar Deluxe", image: "./img/groundchakaradulux.jpg", originalPrice: 700, currentPrice: 560, category: "fountains", subcategory: "Ground chakkars", isSoldOut: false },
            // Special Wheels
            { id: 18, name: "Whistling Wheel (5 Pcs)", image: "./img/Whistlingwheel.png", originalPrice: 550, currentPrice: 440, category: "fountains", subcategory: "Special Wheels", isSoldOut: false },
            // Wire chakkars [standard]
            { id: 19, name: "Wire Chakkar Deluxe", image: "./img/wirechakara.jpeg", originalPrice: 1500, currentPrice: 1200, category: "fountains", subcategory: "Wire chakkars [standard]", isSoldOut: false },
            // Twinkling Stars
            { id: 20, name: '1 1/2" Twinkling Star', image: "./img/1twinkling-star.jpeg", originalPrice: 115, currentPrice: 92, category: "fountains", subcategory: "Twinkling Stars", isSoldOut: false },
            { id: 21, name: '4" Twinkling Star', image: "./img/4Twinkling-star.jpg", originalPrice: 275, currentPrice: 220, category: "fountains", subcategory: "Twinkling Stars", isSoldOut: false },
            // Pencil Torch
            { id: 22, name: "Popcorn Pencil / Water fall pencil", image: "./img/penciltroch.png", originalPrice: 900, currentPrice: 720, category: "fountains", subcategory: "Pencil Torch", isSoldOut: false },
            // ROCKETS
            { id: 23, name: "Baby Rocket", image: "./img/babyrocket.png", originalPrice: 200, currentPrice: 160, category: "rockets", subcategory: "ROCKETS", isSoldOut: false },
            { id: 24, name: "Colour Rocket", image: "./img/colorrocket.webp", originalPrice: 300, currentPrice: 240, category: "rockets", subcategory: "ROCKETS", isSoldOut: false },
            { id: 25, name: "Lunik Rocket", image: "./img/lunkirocket.webp", originalPrice: 800, currentPrice: 640, category: "rockets", subcategory: "ROCKETS", isSoldOut: false },
            { id: 26, name: "Two Sound Rocket", image: "./img/2soundrocket.jpg", originalPrice: 825, currentPrice: 660, category: "rockets", subcategory: "ROCKETS", isSoldOut: false },
            { id: 27, name: "Rocket bomb", image: "./img/rocketbomb.webp", originalPrice: 300, currentPrice: 240, category: "rockets", subcategory: "ROCKETS", isSoldOut: false },
            // CHILDREN NOVELTIES
            { id: 28, name: "Electric Stone", image: "./img/eletricstone.webp", originalPrice: 50, currentPrice: 40, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            { id: 29, name: "TIM TAM (Kit Kat)", image: "./img/timtim.webp", originalPrice: 350, currentPrice: 280, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            { id: 30, name: "FIRE EGG (2 PCS)", image: "./img/fireegg.jpg", originalPrice: 775, currentPrice: 620, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            { id: 31, name: "Selfie Stick", image: "./img/selfistick.jpg", originalPrice: 675, currentPrice: 540, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            { id: 32, name: "SONNY Ring Cap Gun", image: "./img/sonyringcap.webp", originalPrice: 975, currentPrice: 780, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            { id: 33, name: "Gee boom baa", image: "./img/geebumba.webp", originalPrice: 100, currentPrice: 80, category: "novelties", subcategory: "CHILDREN NOVELTIES", isSoldOut: false },
            // COLOUR FOUNTAINS
            { id: 34, name: "Star pots (5 Pcs)", image: "./img/", originalPrice: 500, currentPrice: 400, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 35, name: "Scooby Doo (5 PCS)", image: "./img/scoocyboo.jpeg", originalPrice: 875, currentPrice: 700, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 36, name: "Peacock Feather (White)", image: "./img/peacockfeather.jpg", originalPrice: 525, currentPrice: 420, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 37, name: "Paris Tower", image: "./img/pariestower.jpeg", originalPrice: 495, currentPrice: 396, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 38, name: "Emoji", image: "./img/emoji.jpg", originalPrice: 725, currentPrice: 580, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 39, name: "Siren (2 Pcs)", image: "./img/siren.webp", originalPrice: 600, currentPrice: 480, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 40, name: "Mayajaal / GEMS", image: "./img/geems.webp", originalPrice: 700, currentPrice: 560, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 41, name: "Mini siren (5 pcs)", image: "./img/minisiren.jpg", originalPrice: 625, currentPrice: 500, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 42, name: "Sona Mayur Anar (2 Pcs)", image: "./img/sonamayur.jpeg", originalPrice: 750, currentPrice: 600, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            { id: 43, name: "Wonders mix", image: "./img/wonderemix.webp", originalPrice: 800, currentPrice: 640, category: "fountains", subcategory: "COLOUR FOUNTAINS", isSoldOut: false },
            // COLOUR FOUNTAINS (SUNSHINE BRAND)
            { id: 44, name: "Sun Drops (5 Pcs)", image: "./img/sundrop.webp", originalPrice: 600, currentPrice: 480, category: "fountains", subcategory: "COLOUR FOUNTAINS (SUNSHINE BRAND)", isSoldOut: false },
            { id: 45, name: "Moon Drops (5 Pcs)", image: "./img/moondrops.jpeg", originalPrice: 550, currentPrice: 440, category: "fountains", subcategory: "COLOUR FOUNTAINS (SUNSHINE BRAND)", isSoldOut: false },
            { id: 46, name: "Star Drops (5 Pcs)", image: "./img/stardrop.webp", originalPrice: 550, currentPrice: 440, category: "fountains", subcategory: "COLOUR FOUNTAINS (SUNSHINE BRAND)", isSoldOut: false },
            { id: 47, name: "Signora", image: "./img/", originalPrice: 975, currentPrice: 780, category: "fountains", subcategory: "COLOUR FOUNTAINS (SUNSHINE BRAND)", isSoldOut: false },
            // DOUBLE STEP FOUNTAINS
            { id: 48, name: "Double decker (2 in 1)", image: "./img/dubledocker.jpg", originalPrice: 775, currentPrice: 620, category: "fountains", subcategory: "DOUBLE STEP FOUNTAINS", isSoldOut: false },
            // TRIPLE STEP FOUNTAINS
            { id: 49, name: "Triple monkey (3 in 1)", image: "./img/triplemonkey.webp", originalPrice: 875, currentPrice: 700, category: "fountains", subcategory: "TRIPLE STEP FOUNTAINS", isSoldOut: false },
            // MEGA FOUNTAINS
            { id: 50, name: "Popcorn Fountain", image: "./img/popcorn.webp", originalPrice: 725, currentPrice: 580, category: "fountains", subcategory: "MEGA FOUNTAINS", isSoldOut: false },
            { id: 51, name: "Winter rain", image: "./img/", originalPrice: 675, currentPrice: 540, category: "fountains", subcategory: "MEGA FOUNTAINS", isSoldOut: false },
            { id: 52, name: "Water game", image: "./img/", originalPrice: 775, currentPrice: 620, category: "fountains", subcategory: "MEGA FOUNTAINS", isSoldOut: false },
            { id: 53, name: "Goli soda", image: "./img/", originalPrice: 975, currentPrice: 780, category: "fountains", subcategory: "MEGA FOUNTAINS", isSoldOut: false },
            // FOUNTAIN WITH SKY SHOTS
            { id: 54, name: "Violet Matrix (1 Fountain & 2 Sky shots)", image: "./img/violetmatrix.jpg", originalPrice: 1625, currentPrice: 1300, category: "fountains", subcategory: "FOUNTAIN WITH SKY SHOTS", isSoldOut: false },
            // PEACOCK
            { id: 55, name: "Peacock (5 Wings)", image: "./img/peacock5wings.jpg", originalPrice: 925, currentPrice: 740, category: "fountains", subcategory: "PEACOCK", isSoldOut: false },
            { id: 56, name: "Bada Peacock", image: "./img/badapeacock.webp", originalPrice: 2100, currentPrice: 1680, category: "fountains", subcategory: "PEACOCK", isSoldOut: false },
            // SMOKE
            { id: 57, name: "Rainbow Colour Smoke (3 Pcs)", image: "./img/rainbow.png", originalPrice: 775, currentPrice: 620, category: "novelties", subcategory: "SMOKE", isSoldOut: false },
            { id: 58, name: "Colour smoke (5 pcs)", image: "./img/colorsmoke.jpg", originalPrice: 975, currentPrice: 780, category: "novelties", subcategory: "SMOKE", isSoldOut: false },
            // NEW ARRIVALS
            { id: 59, name: "Butterfly (10 Pcs)", image: "./img/butterfly.webp", originalPrice: 345, currentPrice: 276, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 60, name: "Pamparam (10 Pcs)", image: "./img/paparam.webp", originalPrice: 575, currentPrice: 460, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 61, name: "Helicopter (5 Pcs)", image: "./img/helicopter.jpg", originalPrice: 550, currentPrice: 440, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 62, name: "Look Up (5 PCS)", image: "./img/lookup.jpg", originalPrice: 900, currentPrice: 720, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 63, name: "Golden Lion", image: "./img/goldenlion.jpg", originalPrice: 1475, currentPrice: 1180, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 64, name: "Lollipop", image: "./img/lollipop.jpg", originalPrice: 1150, currentPrice: 920, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 65, name: "Tin Beer", image: "./img/tinbeer.jpg", originalPrice: 600, currentPrice: 480, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 66, name: "Poppet (Vanitha)", image: "./img/poppet.png", originalPrice: 2375, currentPrice: 1900, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 67, name: "5 IN 1 CRACKLING QUEEN", image: "./img/", originalPrice: 1300, currentPrice: 1040, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            { id: 68, name: "Cocktail party (3 tin)", image: "./img/", originalPrice: 1600, currentPrice: 1280, category: "novelties", subcategory: "NEW ARRIVALS", isSoldOut: false },
            // MUD FLOWER POTS
            { id: 69, name: "Mini Pearl", image: "./img/minipearl.jpg", originalPrice: 825, currentPrice: 660, category: "fountains", subcategory: "MUD FLOWER POTS", isSoldOut: false },
            { id: 70, name: "Tim Tim", image: "./img/timtam.jpg", originalPrice: 875, currentPrice: 700, category: "fountains", subcategory: "MUD FLOWER POTS", isSoldOut: false },
            // MINI AERIAL CHOTTA FANCY
            { id: 71, name: "Juniper green ( 6 pcs)", image: "./img/jupitergreen.webp", originalPrice: 600, currentPrice: 480, category: "fountains", subcategory: "MINI AERIAL CHOTTA FANCY", isSoldOut: false },
            { id: 72, name: "Golden ingot (6 pcs)", image: "./img/", originalPrice: 625, currentPrice: 500, category: "fountains", subcategory: "MINI AERIAL CHOTTA FANCY", isSoldOut: false },
            { id: 73, name: "Panch chamak (5 Pcs)", image: "./img/", originalPrice: 675, currentPrice: 540, category: "fountains", subcategory: "MINI AERIAL CHOTTA FANCY", isSoldOut: false },
            { id: 74, name: "7 Shot", image: "./img/", originalPrice: 600, currentPrice: 480, category: "fountains", subcategory: "MINI AERIAL CHOTTA FANCY", isSoldOut: false },
            { id: 75, name: "Chotta Fancy", image: "./img/choota.jpg", originalPrice: 200, currentPrice: 160, category: "fountains", subcategory: "MINI AERIAL CHOTTA FANCY", isSoldOut: false },
            // MEGA AERIAL FANCY
            { id: 76, name: '2" Fancy', image: "./img/", originalPrice: 525, currentPrice: 420, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 77, name: '3 1/2" Fancy', image: "./img/", originalPrice: 1175, currentPrice: 940, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 78, name: '3 1/2" Fancy - 7 Step', image: "./img/", originalPrice: 1425, currentPrice: 1140, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 79, name: '3 1/2" Fancy (Double Ball)', image: "./img/", originalPrice: 1700, currentPrice: 1360, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 80, name: '4" Fancy (2 Pcs) SRI VIJAY', image: "./img/", originalPrice: 4275, currentPrice: 3420, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 81, name: '4" Fancy (Double Ball)', image: "./img/", originalPrice: 2275, currentPrice: 1820, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 82, name: '4" Fancy WOW PINK', image: "./img/", originalPrice: 1975, currentPrice: 1580, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 83, name: '4" Fancy WOW BLUE', image: "./img/", originalPrice: 1975, currentPrice: 1580, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 84, name: '4" Fancy triple ball', image: "./img/", originalPrice: 2300, currentPrice: 1840, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 85, name: "Tom and jerry / Mommy & Daddy (Double ball)", image: "./img/tomjeery.jpg", originalPrice: 2325, currentPrice: 1860, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            { id: 86, name: "Digital star", image: "./img/12shot.png", originalPrice: 1725, currentPrice: 1380, category: "fountains", subcategory: "MEGA AERIAL FANCY", isSoldOut: false },
            // MULTICOLOUR SHOTS
            { id: 87, name: "12 Shots crackling / Raider star", image: "./img/12shot.png", originalPrice: 1175, currentPrice: 940, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 88, name: "30 Shots peacock dance / MAYURA", image: "./img/30peacockdance.webp", originalPrice: 3450, currentPrice: 2760, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 89, name: "12 Colour balls", image: "./img/", originalPrice: 675, currentPrice: 540, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 90, name: "30 Shot Multi Colour", image: "./img/30shot.jpeg", originalPrice: 1950, currentPrice: 1560, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 91, name: "60 Shot Multi Colour", image: "./img/60shot.jpg", originalPrice: 3900, currentPrice: 3120, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 92, name: "120 Shot Multi Colour", image: "./img/120shot.jpg", originalPrice: 7800, currentPrice: 6240, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            { id: 93, name: "240 Shot Multi Colour", image: "./img/240shot.jpg", originalPrice: 15500, currentPrice: 12400, category: "fountains", subcategory: "MULTICOLOUR SHOTS", isSoldOut: false },
            // FAN CAKES (NEW ARRIVALS)
            { id: 94, name: "Celebration night 10x10 shots", image: "./img/Celebrationight.jpeg", originalPrice: 16500, currentPrice: 13200, category: "fountains", subcategory: "FAN CAKES (NEW ARRIVALS)", isSoldOut: false },
            // SPARKLERS
            { id: 95, name: "10Cm Electric Sparklers", image: "./img/10CmElectricSparklers.jpg", originalPrice: 85, currentPrice: 68, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 96, name: "10Cm Colour Sparklers", image: "./img/10CmColourSparklers.webp", originalPrice: 95, currentPrice: 76, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 97, name: "10Cm Green Sparklers", image: "./img/10CmGreenSparklers.jpg", originalPrice: 100, currentPrice: 80, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 98, name: "10Cm Red Sparklers", image: "./img/10CmRedSparklers.jpg", originalPrice: 105, currentPrice: 84, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 99, name: "12Cm Red Sparklers", image: "./img/12CmRedSparklers.jpeg", originalPrice: 160, currentPrice: 128, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 100, name: "15Cm Electric Sparklers", image: "./img/15CmElectricSparklers.jpg", originalPrice: 180, currentPrice: 144, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 101, name: "15Cm Green Sparklers", image: "./img/15CmGreenSparklers.jpg", originalPrice: 220, currentPrice: 176, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 102, name: "15Cm Red Sparklers", image: "./img/15CmRedSparklers.jpg", originalPrice: 235, currentPrice: 188, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            { id: 103, name: "50Cm Sparklers", image: "./img/50CmSparklers.jpg", originalPrice: 875, currentPrice: 700, category: "sparklers", subcategory: "SPARKLERS", isSoldOut: false },
            // CHILDREN'S COLOUR MATCH BOX (NET RATE)
            { id: 104, name: "Mega", image: "./img/", originalPrice: 2450, currentPrice: 2450, category: "gift-boxes", subcategory: "CHILDREN'S COLOUR MATCH BOX (NET RATE)", isSoldOut: false },
            { id: 105, name: "JUMBO", image: "./img/jumbo.webp", originalPrice: 2750, currentPrice: 2750, category: "gift-boxes", subcategory: "CHILDREN'S COLOUR MATCH BOX (NET RATE)", isSoldOut: false },
            { id: 106, name: "Bullet 10 in 1", image: "./img/", originalPrice: 1450, currentPrice: 1450, category: "gift-boxes", subcategory: "CHILDREN'S COLOUR MATCH BOX (NET RATE)", isSoldOut: false },
            // GIFT BOXES (NET RATE)
            { id: 107, name: "Celebration Mania (19 Items)", image: "./img/", originalPrice: 3000, currentPrice: 3000, category: "gift-boxes", subcategory: "GIFT BOXES (NET RATE)", isSoldOut: false },
            { id: 108, name: "Motu Batlu/Toons (23 Items)", image: "./img/", originalPrice: 3500, currentPrice: 3500, category: "gift-boxes", subcategory: "GIFT BOXES (NET RATE)", isSoldOut: false },
            { id: 109, name: "Mega Balaji (81 items)", image: "./img/", originalPrice: 15000, currentPrice: 15000, category: "gift-boxes", subcategory: "GIFT BOXES (NET RATE)", isSoldOut: false }
        ];
        // Initialize page
        document.addEventListener("DOMContentLoaded", () => {
            loadProductsFromStorage(); // Load products first
            initializeStateModal();
            initializeProductQuantities();
            setupEventListeners();
            loadCartFromStorage();
        });
        // Load products from localStorage or use default
        function loadProductsFromStorage() {
            const savedProducts = localStorage.getItem('skCrackersProducts');
            if (savedProducts) {
                products = JSON.parse(savedProducts);
            } else {
                products = defaultProducts;
                saveProductsToStorage(); // Save default products to localStorage
            }
        }
        // Save products to localStorage
        function saveProductsToStorage() {
            localStorage.setItem('skCrackersProducts', JSON.stringify(products));
        }
        // Initialize state selection modal
        function initializeStateModal() {
            const statesList = document.getElementById('statesList');
            states.forEach(state => {
                const button = document.createElement('button');
                button.className = 'state-option';
                button.textContent = state;
                button.onclick = () => selectState(state);
                statesList.appendChild(button);
            });
        }
        // Handle state selection
        function selectState(state) {
            selectedState = state;
            // Set minimum order amount based on state
            if (state === 'Tamil Nadu') {
                minimumOrderAmount = 3000;
            } else {
                minimumOrderAmount = 5000;
            }
            // Hide modal and show state info
            document.getElementById('stateModal').classList.add('hidden');
            const stateInfoBar = document.getElementById('stateInfoBar');
            const stateInfoText = document.getElementById('stateInfoText');
            stateInfoText.textContent = `Selected State: ${state} | Minimum Order: ₹${minimumOrderAmount.toLocaleString()}`;
            stateInfoBar.classList.add('show');
            // Load products after state selection
            showAllProducts();
        }
        // Initialize product quantities
        function initializeProductQuantities() {
            products.forEach(product => {
                productQuantities[product.id] = 1;
            });
        }
        // Setup event listeners
        function setupEventListeners() {
            const searchInput = document.getElementById("searchInput");
            const categoryFilter = document.getElementById("categoryFilter");
            searchInput.addEventListener("input", handleSearch);
            categoryFilter.addEventListener("change", handleCategoryChange);
        }
        // Handle search input
        function handleSearch(e) {
            currentSearch = e.target.value.toLowerCase();
            if (currentSearch) {
                currentFilter = "all";
                document.getElementById("categoryFilter").value = "all";
            }
            filterAndDisplayProducts();
        }
        // Handle category change
        function handleCategoryChange(e) {
            currentFilter = e.target.value;
            if (currentFilter !== "all") {
                currentSearch = "";
                document.getElementById("searchInput").value = "";
            }
            filterAndDisplayProducts();
        }
        // Perform search
        function performSearch() {
            filterAndDisplayProducts();
        }
        // Filter and display products
        function filterAndDisplayProducts() {
            let filteredProducts = products;
            if (currentFilter !== "all") {
                filteredProducts = filteredProducts.filter((product) => product.subcategory === currentFilter);
            }
            if (currentSearch) {
                filteredProducts = filteredProducts.filter(
                    (product) =>
                        product.name.toLowerCase().includes(currentSearch) ||
                        product.subcategory.toLowerCase().includes(currentSearch)
                );
            }
            displayProducts(filteredProducts);
            updateTitle();
        }
        // Update page title
        function updateTitle() {
            const titleElement = document.getElementById("productsTitle");
            if (currentSearch) {
                titleElement.textContent = `Search Results for "${currentSearch}"`;
            } else if (currentFilter === "all") {
                titleElement.textContent = "All Products";
            } else {
                titleElement.textContent = currentFilter;
            }
        }
        // Update quantity in table
        function updateTableQuantity(productId, changeOrValue) {
            let currentQty = productQuantities[productId] || 1;
            let newQty;

            if (typeof changeOrValue === 'number') { // It's a change (+1 or -1)
                newQty = currentQty + changeOrValue;
            } else { // It's a direct value from input
                newQty = parseInt(changeOrValue) || 1;
            }

            newQty = Math.max(1, newQty); // Ensure quantity is at least 1
            productQuantities[productId] = newQty;

            // Update the input field directly
            const qtyInput = document.querySelector(`.products-table input[data-product-id="${productId}"]`);
            if (qtyInput) {
                qtyInput.value = newQty;
            }
        }
        // Display products in table format
        function displayProducts(productsToShow) {
            const productContainer = document.getElementById("productContainer");
            if (productsToShow.length === 0) {
                productContainer.innerHTML = '<div class="no-products">No products found</div>';
                return;
            }
            // Group products by subcategory
            const groupedProducts = {};
            productsToShow.forEach((product) => {
                if (!groupedProducts[product.subcategory]) {
                    groupedProducts[product.subcategory] = [];
                }
                groupedProducts[product.subcategory].push(product);
            });
            productContainer.innerHTML = "";
            // Display each subcategory as a table
            Object.keys(groupedProducts).forEach((subcategory) => {
                const categorySection = document.createElement("div");
                categorySection.className = "category-section";
                const categoryTitle = document.createElement("h3");
                categoryTitle.className = "category-title";
                categoryTitle.textContent = subcategory;
                const table = document.createElement("table");
                table.className = "products-table";
                // Table header
                table.innerHTML = `
                    <thead>
                        <tr>
                            <th>Preview</th>
                            <th>Product Name</th>
                            <th>Per</th>
                            <th>M.R.P (₹)</th>
                            <th>Discount (₹)</th>
                            <th>Our Price (₹)</th>
                            <th>Qty</th>
                            <th>Add to Cart</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                `;
                const tbody = table.querySelector('tbody');
                groupedProducts[subcategory].forEach((product) => {
                    const discount = product.originalPrice - product.currentPrice;
                    const quantity = productQuantities[product.id] || 1;
                    const row = document.createElement("tr");
                    let qtyCellContent;
                    let addToCartBtnContent;
                    let addToCartBtnDisabled = '';
                    if (product.isSoldOut) {
                        qtyCellContent = '<span class="sold-out-text">Sold Out</span>';
                        addToCartBtnContent = 'Sold Out';
                        addToCartBtnDisabled = 'disabled';
                    } else {
                        qtyCellContent = `
                            <div class="quantity-controls-table">
                                <button class="qty-btn-table" onclick="updateTableQuantity(${product.id}, -1)">-</button>
                                <input type="number" class="qty-input" value="${quantity}" min="1" onchange="updateTableQuantity(${product.id}, this.value)" data-product-id="${product.id}">
                                <button class="qty-btn-table" onclick="updateTableQuantity(${product.id}, 1)">+</button>
                            </div>
                        `;
                        addToCartBtnContent = 'Add to Cart';
                    }
                    row.innerHTML = `
                        <td>
                            <img src="${product.image}" alt="${product.name}" class="product-image-small" style="cursor: pointer;" onclick="showProductModal(${product.id})">
                        </td>
                        <td>${product.name}</td>
                        <td>1 Box</td> <!-- Changed from 1 Pkt to 1 Box -->
                        <td class="price-mrp">₹${product.originalPrice}</td>
                        <td class="discount-price">₹${discount}</td>
                        <td class="price-current">₹${product.currentPrice}</td>
                        <td>${qtyCellContent}</td>
                        <td>
                            <button class="add-to-cart-btn" onclick="addToCart(${product.id})" ${addToCartBtnDisabled}>${addToCartBtnContent}</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                categorySection.appendChild(categoryTitle);
                categorySection.appendChild(table);
                productContainer.appendChild(categorySection);
            });
        }
        // Show product modal
        function showProductModal(productId) {
            const product = products.find(p => p.id === productId);
            const modal = document.getElementById('productModal');
            const modalMainImage = document.getElementById('modalMainImage');
            const modalProductName = document.getElementById('modalProductName');
            const modalPriceOriginal = document.getElementById('modalPriceOriginal');
            const modalPriceCurrent = document.getElementById('modalPriceCurrent');
            // Set product details
            modalMainImage.src = product.image;
            modalMainImage.alt = product.name;
            modalProductName.textContent = product.name;
            modalPriceOriginal.textContent = `₹${product.originalPrice}`;
            modalPriceCurrent.textContent = `₹${product.currentPrice}`;
            // Show modal
            modal.classList.add('show');
        }
        // Close product modal
        function closeProductModal() {
            const modal = document.getElementById('productModal');
            modal.classList.remove('show');
        }
        // Show all products
        function showAllProducts() {
            currentFilter = "all";
            currentSearch = "";
            document.getElementById("categoryFilter").value = "all";
            document.getElementById("searchInput").value = "";
            filterAndDisplayProducts();
        }
        // Load cart from localStorage
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('skCrackersCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartCount();
                updateCartDisplay();
            }
        }
        // Save cart to localStorage
        function saveCartToStorage() {
            localStorage.setItem('skCrackersCart', JSON.stringify(cart));
        }
        // Add to cart
        function addToCart(productId) {
            const product = products.find((p) => p.id === productId);
            if (product.isSoldOut) {
                showNotification("This product is currently sold out.", "error");
                return;
            }
            const quantity = productQuantities[productId] || 1;
            const existingItem = cart.find((item) => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ ...product, quantity: quantity });
            }
            // Reset product quantity to 1
            productQuantities[productId] = 1;
            // Update the quantity input field
            const qtyInput = document.querySelector(`input[data-product-id="${productId}"]`);
            if (qtyInput) {
                qtyInput.value = 1;
            }
            saveCartToStorage();
            updateCartCount();
            updateCartDisplay();
            showNotification("Product added to cart!", "success");
        }
        // Update cart count
        function updateCartCount() {
            const cartCount = document.getElementById("cartCount");
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }
        // Update cart display
        function updateCartDisplay() {
            const cartItems = document.getElementById("cartItems");
            const cartTotal = document.getElementById("cartTotal");
            const minimumOrderMessage = document.getElementById("minimumOrderMessage");
            const checkoutBtn = document.getElementById("checkoutBtn");
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="empty-cart">Your cart is empty</p>';
                cartTotal.textContent = "0.00";
                minimumOrderMessage.style.display = "none";
                checkoutBtn.disabled = true;
                return;
            }
            cartItems.innerHTML = "";
            let total = 0;
            cart.forEach((item) => {
                total += item.currentPrice * item.quantity;
                const cartItem = document.createElement("div");
                cartItem.className = "cart-item";
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">₹${item.currentPrice}</div>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                            <button class="qty-btn" onclick="removeFromCart(${item.id})" style="margin-left: 10px; background: #ff4757; color: white;">×</button>
                        </div>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            cartTotal.textContent = total.toFixed(2);
            // Check minimum order amount
            if (total < minimumOrderAmount) {
                const remainingAmount = minimumOrderAmount - total;
                minimumOrderMessage.innerHTML = `⚠️ Minimum order: ₹${minimumOrderAmount.toLocaleString()}<br>Add ₹${remainingAmount.toFixed(2)} more to checkout`;
                minimumOrderMessage.style.display = "block";
                checkoutBtn.disabled = true;
            } else {
                minimumOrderMessage.style.display = "none";
                checkoutBtn.disabled = false;
            }
        }
        // Update quantity in cart
        function updateQuantity(productId, change) {
            const item = cart.find((item) => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveCartToStorage();
                    updateCartCount();
                    updateCartDisplay();
                }
            }
        }
        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter((item) => item.id !== productId);
            saveCartToStorage();
            updateCartCount();
            updateCartDisplay();
        }
        // Toggle cart sidebar
        function toggleCart() {
            const cartSidebar = document.getElementById("cartSidebar");
            const overlay = document.getElementById("overlay");
            cartSidebar.classList.toggle("open");
            overlay.classList.toggle("active");
            if (cartSidebar.classList.contains("open")) {
                updateCartDisplay();
            }
        }
        // Proceed to checkout
        function proceedToCheckout() {
            const total = cart.reduce((sum, item) => sum + (item.currentPrice * item.quantity), 0);
            if (total >= minimumOrderAmount) {
                saveCartToStorage();
                alert(`Proceeding to checkout with total: ₹${total.toFixed(2)}`);
                // Here you can redirect to checkout page
                window.location.href = "./checkout.html";
            }
        }
        // Show notification
        function showNotification(message, type = "success") {
            const notification = document.createElement("div");
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === "success" ? '#28a745' : '#dc3545'};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        // Add CSS animation for notifications
        const style = document.createElement("style");
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
        // Close modal when clicking outside
        document.getElementById('productModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProductModal();
            }
        });
        // Listen for storage changes from admin panel
        window.addEventListener('storage', (event) => {
            if (event.key === 'skCrackersProducts') {
                loadProductsFromStorage();
                filterAndDisplayProducts(); // Re-render products with updated data
                updateCartDisplay(); // Update cart in case a product inthe  cart became sold out
            }
        });
    </script>
</body>
</html>
